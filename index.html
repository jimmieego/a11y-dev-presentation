<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Web Accessibility for Developers</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template" >
# Web Accessibility for Developers
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
## Agenda
- WCAG 2.0
- Focus
- Semantic HTML
- WAI-ARIA
- Common Accessibility Issues
- Automated Testing
- Resources
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
## WCAG 2.0
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Overview of WCAG 2.0
<img alt="Overview of the structure of WCAG 2.0" src="images/wcag_overview.png" style="height: 80%; width: 80%;"/>
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Level of conformance
- Level  <span style="color:#196fa6">**A**</span>: Sets a minimum level of accessibility and does not achieve broad accessibility for many situations.
- Level <span style="color:#196fa6">**AA**</span>: Generally recommended for web-based information.
- Level <span style="color:#196fa6">**AAA**</span>: W3C does not recommend be required as general policy because it is not possible to satisfy all Level AAA Success Criteria for some content.
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### WCAG 2.0 for developers
- [W3C documentation](https://www.w3.org/TR/WCAG20/)
- [Interpretation of success criteria](https://www.wuhcag.com/wcag-checklist/)
- This presentation will focus on:
 - Knowledge and techniques
 - Common issues
 - Automated testing
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
## Focus
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Introduction
- <span style="color:#196fa6">**Focus**</span>: Which control on the screen currently receives input from keyboard and from the clipboard when you paste content.
- Focus ring: visual focus indicator, style depending on browser and page style.

![Sign In button in focus](images/button_focus.png)
![Nav menu in focus](images/menu_focus.png)
- **<span style="color:#196fa6">Tab order**</span>: The order in which focus proceeds forward and backward through interactive elements via <kbd>Tab</kbd> key.
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Focusable elements
- Native interactive HTML elements are focusable:
 - Text fields, Buttons, Links, Select lists ...
- (Normally) not focusable:
 - Paragraphs, Divs, Spans, Headings ...
- Only focus elements that keyboard users need to interact with
- Screen reader users have ways to read focusable and non-focusable elements
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Tab order matters
<p style="text-align: left;">[WCAG 1.3.2](https://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-sequence.html): Reading and navigation order, as determined by DOM structure, should be logical and intuitive.</p>
- Be careful changing visual position of elements on screen using CSS
- Avoid jumping around tab order
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Offscreen elements
- Example: [Calcite drawer pattern](http://esri.github.io/calcite-web/documentation/patterns/#drawers)
- Prevent the panel from gaining focus when it's off screen
 - Set `display:none` or `visibility:hidden` when off screen
- Only allow it to be focused when the user can interact with it
 - Set `display:block` or `visibility:visible` before showing it to user
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Test
- Tab through page to see tab order doesn't disappear or jump out of logical sequence
- Make sure to hide offscreen content
- Rearrange elements' position in the DOM if necessary
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Manage focus
- `tabindex="0"`: let natural DOM structure determine tab order
- `tabindex="-1"`: programmatically move focus (e.g., error message, menus, radio buttons, etc.)
- `tabindex="5"`: anti-pattern
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Focus management example
Customized menu
```html
<menu-list>
<!-- After the user presses the down arrow key,
focus the next available child -->
<menu-item tabindex="0">Map</menu-item>

<!-- call .focus() on this element -->
<menu-item tabindex="-1">Layer</menu-item>

<menu-item tabindex="-1">Scene</menu-item>
<menu-item tabindex="-1">Tool</menu-item>
<menu-item tabindex="-1">Data</menu-item>
</menu-list>
```
[Example code](http://codepen.io/jimmieego/pen/Obdebp)
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Keyboard traps
- Keyboard focus should not be locked or trapped at one particular element.
- **Temporary** keyboard trap is necessary for modal dialogs:
 - When modal is displayed: trap focus inside modal.
 - When modal is closed: restore focus to previously focused item.
 - [Demo](http://gdkraus.github.io/accessible-modal-dialog/)
 - [Example code](https://github.com/gdkraus/accessible-modal-dialog)
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
## Semantic HTML
  </script>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Accessibility tree
<p style="text-align: left;">Browser's responsibility to expose accessibility tree to assistive technologies. </p>
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
Microsoft Edge's accessibility tree view
![Microsoft Edge accessibility tree view](images/edge_a11tree.png)
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
Chrome Canary's accessibility tree view
![Accessibility tree in Chrome Canary](images/chrome_a11tree.jpg)
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
<p style="text-align: left;">Shows how website is interpreted by assistive technologies and how accessible data are provided.</p>
![Accessibility tree](images/a11ytreestructure.jpg)
  </script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
- Assistive technologies simulate and relay user interactions like click and key press to accessibility tree.
- As developers, we need:
 - Express the semantics of page correctly.
 - Specify accessible names and descriptions.
 - Make sure important elements have correct accessible roles, states, and properties.
 - The browser can then let the assistive technologies access the information to create a customized experience.
  </script>
</section>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Semantics in native HTML
- Most HTML elements have implicit semantics (role and state).
- Native HTML elements are recognized by browsers and work predictably on a variety of platforms.
- We should take advantage of built-in accessibility by writing HTML that expresses the semantics of page elements.
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
Example:
```html
<a href="http://www.esri.com">Esri Homepage</a>
```
 - Role="link"
 - Accessible name="Esri Homepage"
 - State="focusable"
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
Example:
```html
<label><input type="checkbox" checked>Working at Esri</label>
```
 - Role="checkbox"
 - Accessible name="Working at Esri"
 - State="focusable checked"

![Checkbox example](images/checkbox_example.png)
	</script>
</section>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Keyboard
- Native interactive HTML elements receive keyboard focus:
 - `<a href>`, `<button>`, `<input>`...
- <kbd>Tab</kbd> order follows the DOM order of interactive elements
- Interactive elements have expected interactions:
 - Link: click, tap, or <kbd>Enter</kbd> key
 - Button: click, tap, <kbd>Enter</kbd> key, or <kbd>Space</kbd> key
 - Input: click, tap, or <kbd>Enter</kbd> key
	</script>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Neutral semantics
- Some HTML elements do not convey semantics (role or state)
 - `<div>This is a block area</div>`
 - `<span>This is an inline area</span>`
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
<p style="text-align: left;">If the element is interactive, we need to do extra work:</p>
- Make it focusable: `tabindex="0"`
- Receive keyboard events: <kbd>Enter</kbd>, <kbd>Space</kbd>
- Name: explicit label (`label`) or implicit text (`aria-label`, `aria-labelledby`)
- Role
- States and properties
	</script>
</section>

</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
## WAI-ARIA
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Why need ARIA
- Native HTML semantics should still be used whenever possible, but ARIA is useful when certain semantics, design patterns, or interactions make it impossible to do so.
- Example: a pop-up menu, no standard HTML element
- Example: a semantic characteristic "the user needs to know about this as soon as possible"
	</script>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### What is WAI-ARIA
- Specification for increasing accessibility of custom elements
- Allows developers to modify and augment accessibility tree from standard DOM

<img alt="Normal DOM tree" src="images/aria_a11tree_1.jpg" width="40%" height="40%" />
<img alt="ARIA complement accessibility tree" src="images/aria_a11tree_2.jpg" width="40%" height="40%" />
	</script>
</section>

<section data-background-color="#e7e7e7">
<p style="text-align: left;">ARIA doesn't augment any of the element's inherent behavior:</p>
<div align="left">
	<ul>
		<li>Focusable</li>
		<li>Keyboard event listeners</li>
		<li>Custom behaviors still need to be implemented</li>
	</ul>
</div>
</section>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### ARIA attributes
- **Roles**: meaning of an element
 - `tooltip`, `tablist`, `search`
- **Properties**: relationships and functions
 - `aria-required`, `aria-controls`
 - `aria-label`, `aria-labelledby`
- **States**: current interaction states
 - `aria-checked`, `aria-expanded`, `aria-hidden`
	</script>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### An ARIA example
```html
<li tabindex="0" class="checkbox" checked>
	Show premium content
</li>
```
- Sighted users see a checkbox as a result of CSS `class="checkbox"`.
- Screen reader users will not know this is meant to be a checkbox.
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### An ARIA example
```html
<li tabindex="0" class="checkbox" role="checkbox" checked
aria-checked="true">
	Show premium content
</li>
```
Screen reader will report this as a checkbox.
	</script>
</section>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Roles
- Landmarks
 - `banner`: The main header of a page; typically assigned to a header element.
 - `contentinfo`: A collection of metadata, copyright information and the like.
 - `main`: the main content of a document.
 - `navigation`: A collection of links for navigation.
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Roles
- Widgets
 - `alert`
 - `dialog`
 - `data grid`
 - `tab`
 - `tablist`
 - `tabpanel`
	</script>
</section>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Labels
 - `aria-label`
 - Specifies a string as accessible label
 - Overrides native labeling
![aria-label for menu button](images/aria-label.jpg)
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Labels
- `aria-labelledby`
 - Specifies `id` of another DOM element (or a list of `id`)
 - Overrides all other name sources
 - Applicable to any element, not just labelable elements
 - Can specify visually hidden elements
![aria-labelledby example](images/aria-labelledby.jpg)
	</script>
</section>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Relationships
- `aria-owns`
 - Indicates an element should be treated as parent of another separate element in the DOM
![aria-owns example](images/aria-owns.jpg)
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Relationships
- `aria-describedby`
 - Provides an accessible description for an element
 - References elements in the DOM separated from current element
![aria-describedby example](images/aria-describedby.jpg)
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Relationships
- `aria-controls`
 - Indicates an element "controls" another element in interaction
```html
<div role="scrollbar" aria-controls="main"></div>
<div id="main">
. . .
</div>
```
	</script>
</section>
</section>

<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Hide elements
- Elements explicitly hidden from the DOM will not be included in the accessibility tree
```css
[hidden] {
	display: none; /*not rendered, no space allocated */
}
[invisible] {
	visibility: hidden; /*rendered, space allocated*/
}
```
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
- Elements not visually rendered but not explicitly hidden is still included in accessibility tree.
```css
/* Screen reader only*/
.sr-only {
	position: absolute;
	left: -10000px;
	width: 1px;
	height: 1px;
	overflow: hidden;
}
```
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
- `aria-hidden`
 - Excludes content from assistive technology that is not visually hidden.
 - Removes current element and all of its descendants from the accessibility tree.
	</script>
</section>

</section>


<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Update elements
- `aria-live`
 - Marks an element as "live region" in which updates should be communicated to users immediately.
 - `aria-live="polite"`: alert the user when the screen reader has finished current action
 - `aria-live="assertive"`: interrupt current action and alert the user immediately
<img alt="aria-live example" src="images/aria-live.jpg" width="55%" height="55%"/>
	</script>
</section>


<section>
<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### ARIA best practices
<p style="text-align:left;">1. Do not change native semantics, unless you *really* have to.</p>
 - Example: A developer wants to implement a heading which is also a button.
 - Do not do this:
```html
<h2 role="button">heading button</h2>
```
 - Do this:
```html
<h2><button>heading button</button></h2>
```
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
<p style="text-align:left;">2. All interactive ARIA elements must be usable with the keyboard.</p>
- The elements should respond to standard key strokes when applicable.
 - Example: if using `role="button"`, the element should have `tabindex="0"` to receive keyboard focus and JavaScript to activate <kbd>Enter</kbd> and <kbd>Space</kbd> actions.
- The user must be able to navigate to the element and perform actions using keyboard.
 - Example: If the user can click through cells of a data grid, he must be able to navigate the cells using keyboard only.
	</script>
</section>

<section data-background-color="#e7e7e7">
<p style="text-align:left;">3. Do not use `role="presentation"` or `aria-hidden="true"` on a visible and focusable element.</p>
<div align="left">
<ul>
<li>This will result in focusing on "nothing".</li>
<li>Do not do these:</li>
</ul>
</div>

<pre><code data-trim class="html">
<button role="presentation">Press me</button>
<button aria-hidden="true">Press me</button>
</code></pre>
</section>

<section data-background-color="#e7e7e7">
<p style="text-align:left;">4. All interactive elements must have an accessible label or name.</p>
<p style="text-align:left;">Do this:</p>
<pre><code class="html" data-trim>
<label>
	Email
	<input type="text" placeholder="name@example.com">
</label>
</code></pre>
</section>
</section>

<section data-background-color="#e7e7e7">
<h3>ARIA elements accessibility checklist</h2>
<table style="font-size:0.8em;">
	<thead>
		<tr>
			<th>Requirement</th>
			<th>Description</th>
		</tr>
  </thead>
	<tbody>
		<tr>
			<td>Focusable</td>
			<td>Can you get to the element via keyboard?</td>
		</tr>
		<tr>
			<td>Operable</td>
			<td>Can you use the element with keyboard?</td>
		</tr>
		<tr>
			<td>Expected operation</td>
			<td>Does the element match <a href="https://www.w3.org/TR/wai-aria-practices/">WAI-ARIA Authoring Practices</a>?</td>
		</tr>
		<tr>
			<td>Focus visible</td>
			<td>Can you see when the element has keyboard focus?</td>
		</tr>
		<tr>
			<td>Label</td>
			<td>Does the element have accessible text label?</td>
		</tr>
		<tr>
			<td>Role</td>
			<td>Does the element have appropriate ARIA role?</td>
		</tr>
		<tr>
			<td>States and properties</td>
			<td>Does the element have any ARIA states and properties to show UI changes?</td>
		</tr>
	</tbody>
</table>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
## Common Accessibility Issues
- Text alternatives
- Semantic HTML
- Tab order and focus
- Color
- Label
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Text alternatives
- Every `<img>` must have an `alt` attribute.
- Images that contain information or perform actions require descriptive `alt` text.
- The `alt` attribute should describe the *information* conveyed by the image, not the image itself.
- Decorative images should have empty `alt` text.
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Semantic HTML
- Tabular data should be in `<table>`.
- Headings are in `<h1>` - `<h6>` elements.
- Lists have list item (`<li>`) elements wrapped in `<ul>` or `<ol>` elements.
- Inputs (`<input>`) should always have a `<label>`, `aria-label`, or `aria-labelledby`.
- Set up ARIA [landmark roles](https://www.w3.org/TR/wai-aria/roles#landmark_roles).
- [WAI-ARIA Authoring Practices](https://www.w3.org/TR/wai-aria-practices-1.1/) provides detailed design patterns of accessible web components such as accordion, dialog, tabs, etc.
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Tab order and focus
- Use `tabindex="0"` and let the natural DOM structure determine the keyboard tab order.
- Avoid jumping around keyboard focus
- Show clear focus indicator for interactive elements
- Do not set `outline:none` to focusable elements, unless using customized focus style
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### Color
- In addition to color, provide additional indication that does not rely on color perception.
- Minimum color contrast ratio is **4.5** for normal text, 3 for larger text (at least 24 px or 19 px bold).
- [Contrast ratio tool](http://leaverou.github.io/contrast-ratio/)
- Placeholder text in form fields is **not** exempt.
- Logos or disabled elements are exempt.
	</script>
</section>

<section data-background-color="#e7e7e7">
<h3>Label</h3>
<ul>
<li>Associate label with form control:</li>
<pre><code class="html" data-trim>
<!-- calcite-web pattern -->
<label>
	Email
	<input type="text" placeholder="name@example.com">
</label>
<!-- alternative -->
<label for="email">Email: </label>
<input type="text" id="email" placeholder="name@example.com">
</pre></code>
<li>Avoid replacing visual text label with placeholder text.</li>
<li>Use <code>aria-label</code>, <code>aria-labelledby</code>, and <code>aria-describedby</code> if needed.</li>
</ul>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
## Automated Testing
	</script>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
### A11Y command-line tool
<img alt="a11y command-line tool logo" src="images/a11ylogo.png" width="20%" height="20%"/>

by [Addy Osmani](https://addyosmani.com/a11y/)
```
npm install -g a11y
a11y www.esri.com > audit.txt
```
	</script>
</section>

<section>
<section data-background-color="#e7e7e7">
<h3>A11Y module usage</h3>
<p style="text-align:left;"><code>a11y(URL, callback)</code> accepts a string as input and takes a callback providing a reports object with the accessibility audit for the supplied URL.</p>
</section>

<section data-background-color="#e7e7e7">
<pre><code class="JavaScript" data-trim>
var a11y = require('a11y');
a11y('esri.com', function (err, reports) {
	var output = JSON.parse(reports);
	var audit = output.audit; //a11y formatted report
	var report = output.report;
	//Chrome devtools accessibility audit formatted report
	reports.audit.forEach(function (el) {
		// result will be PASS, FAIL or NA
		if (el.result === 'FAIL') {
		// el.heading
		// el.severity
		// el.elements
		}
	});
});
</code></pre>
</section>
</section>

<section data-background-color="#e7e7e7">
<h3>axe-core</h3>
<p style="text-align:left;">Accessibility engine for automated Web UI testing by <a href="https://github.com/dequelabs/axe-core">dequelabs</a>:</p>
<pre><code data-trim>
npm install axe-core --save-dev
</code></pre>

<pre><code data-trim>
<script src="node_modules/axe-core/axe.min.js" ></script>
<!-- Normal page content ... -->
<script>
	axe.run(function (err, results) {
		if (err) throw err;
		ok(results.violations.length === 0,
			'Should be no accessibility issues');
		// complete the async call
	});
</script>
</code></pre>
</section>

<section data-markdown data-background-color="#e7e7e7">
	<script type="text/template">
## Resources
- [WAI-ARIA Authoring Practices 1.1](https://www.w3.org/TR/wai-aria-practices-1.1/)
- egghead.io course: [Start Building Accessible Web Applications Today](https://egghead.io/courses/start-building-accessible-web-applications-today)
- [a11y](https://github.com/addyosmani/a11y)
- [axe-core](https://github.com/dequelabs/axe-core)
- Browser plugin:
 - [aXe](http://www.deque.com/products/axe/)
 - [Chrome Accessibility Developer Tools](https://chrome.google.com/webstore/detail/accessibility-developer-t/fpkknkljclfencbdbgkenhalefipecmb?hl=en)
- Some of the diagrams are adapted from [Google Developers: Web Fundamentals](https://developers.google.com/web/fundamentals/)
	</script>
</section>



			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
